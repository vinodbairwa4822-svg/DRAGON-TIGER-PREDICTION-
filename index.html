<!DOCTYPE html>
<html>
<head>
    <title>Dragon Tiger Trend Break Predictor</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
        }
        button {
            margin: 5px;
            padding: 10px 20px;
        }
        .prediction-box, .statistics-box, .error-box {
            margin-top: 20px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 8px;
        }
    </style>
</head>
<body>

<h1>Dragon Tiger Trend Break Predictor</h1>

<button onclick="addResult('D')">Dragon (D)</button>
<button onclick="addResult('T')">Tiger (T)</button>
<button onclick="addResult('H')">Tie (H)</button>

<div class="prediction-box">
    <h3>History:</h3>
    <p id="history"></p>
</div>

<div class="prediction-box">
    <h3>Prediction:</h3>
    <p id="prediction">Predict: - | Accuracy: 0%</p>
</div>

<div class="statistics-box">
    <h3>Statistics:</h3>
    <p>Pass: <span id="passCount">0</span> | Fail: <span id="failCount">0</span> | Accuracy: <span id="accuracy">0%</span></p>
</div>

<div class="error-box">
    <h3>Error Analysis:</h3>
    <p id="errorAnalysis">No errors detected yet.</p>
</div>

<script>
let history = [];
let predictions = [];
let correctCount = 0;
let failCount = 0;
let currentTrend = null; // D या T

function addResult(result) {
    history.push(result);

    let prediction = makePrediction();

    if (prediction) {
        predictions.push(prediction);
        if (prediction === result) {
            correctCount++;
        } else {
            failCount++;
            // Trend टूट गया → adjust करना
            currentTrend = result;
        }
    } else {
        currentTrend = result;
    }

    document.getElementById("history").textContent = history.join(", ");

    let accuracyPercent = predictions.length > 0 ? ((correctCount / predictions.length) * 100).toFixed(2) : 0;
    document.getElementById("prediction").textContent = prediction ? `Predict: ${prediction} | Accuracy: ${accuracyPercent}%` : "Predict: - | Accuracy: 0%";

    document.getElementById("passCount").textContent = correctCount;
    document.getElementById("failCount").textContent = failCount;
    document.getElementById("accuracy").textContent = accuracyPercent + "%";

    document.getElementById("errorAnalysis").textContent = accuracyPercent < 50 ? "Low accuracy detected, trend adjusted!" : "Prediction accuracy is good.";
}

function makePrediction() {
    if (history.length < 2) {
        return null; // पर्याप्त डेटा नहीं है
    }

    let last = history[history.length - 1];
    let secondLast = history[history.length - 2];

    // अगर trend पहले से है और टूट नहीं रहा
    if (currentTrend && last === currentTrend) {
        return currentTrend;
    }

    // अगर trend टूट रहा है → नया trend set करें
    if (last === secondLast) {
        currentTrend = last;
        return currentTrend;
    } else {
        currentTrend = last;
        return currentTrend;
    }
}
</script>

</body>
</html>
