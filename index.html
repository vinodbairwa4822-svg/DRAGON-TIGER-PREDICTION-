<!DOCTYPE html>
<html>
<head>
    <title>Dragon Tiger Trend Predictor</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        button { margin: 5px; padding: 10px 20px; }
        .prediction-box, .statistics-box, .error-box {
            margin-top: 20px; padding: 10px; border: 1px solid #ddd; border-radius: 8px;
        }
    </style>
</head>
<body>

<h1>Dragon Tiger Trend Tracker</h1>

<button onclick="addResult('D')">Dragon (D)</button>
<button onclick="addResult('T')">Tiger (T)</button>
<button onclick="addResult('H')">Tie (H)</button>

<div class="prediction-box">
    <h3>History:</h3>
    <p id="history"></p>
</div>

<div class="prediction-box">
    <h3>Prediction:</h3>
    <p id="prediction">Predict: -</p>
</div>

<div class="statistics-box">
    <h3>Statistics:</h3>
    <p>Pass: <span id="passCount">0</span> | Fail: <span id="failCount">0</span></p>
</div>

<div class="error-box">
    <h3>Error Analysis:</h3>
    <p id="errorAnalysis">No errors yet.</p>
</div>

<script>
let history = [];
let correctCount = 0;
let failCount = 0;
let currentTrend = null;

function addResult(result) {
    history.push(result);

    detectTrend();

    let prediction = currentTrend;

    if (prediction) {
        if (prediction === result) {
            correctCount++;
        } else {
            failCount++;
            detectTrend(); // trend break → re-check trend
        }
    }

    updateUI(prediction);
}

function detectTrend() {
    if (history.length < 2) {
        currentTrend = history[history.length - 1] || null;
        return;
    }

    // Count D and T in recent history
    let countD = history.filter(r => r === "D").length;
    let countT = history.filter(r => r === "T").length;

    // Majority decide trend
    if (countD > countT) {
        currentTrend = "D";
    } else if (countT > countD) {
        currentTrend = "T";
    } else {
        currentTrend = history[history.length - 1]; // tie → last result
    }
}

function updateUI(prediction) {
    document.getElementById("history").textContent = history.join(", ");
    document.getElementById("prediction").textContent = prediction ? `Predict: ${prediction}` : "Predict: -";

    document.getElementById("passCount").textContent = correctCount;
    document.getElementById("failCount").textContent = failCount;

    document.getElementById("errorAnalysis").textContent = failCount > correctCount ? "Low accuracy detected!" : "Prediction accuracy is good.";
}
</script>

</body>
</html>
